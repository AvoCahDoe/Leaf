<!-- src/app/features/map/components/filter-modal/filter-modal.component.html -->
<div
  class="fixed top-4 left-1/4 transform -translate-x-1/2 w-full max-w-lg bg-white rounded-2xl shadow-2xl border border-gray-200 z-40 overflow-hidden animate-slideInUp"
>
  <!-- Modal Header -->
  <div class="bg-gradient-to-r from-orange-600 to-red-700 px-6 py-4">
    <h2 class="text-xl font-bold text-white flex items-center gap-2">
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"
        />
      </svg>
      Filtrer les Marqueurs
    </h2>
    <p class="text-orange-100 text-sm mt-1">
      Filtrez les marqueurs par nom, forme juridique ou ICE
    </p>
  </div>

  <!-- Modal Content -->
  <div class="p-6 space-y-6">
    <!-- Filter by Name -->
    <div class="space-y-2">
      <label class="block text-sm font-medium text-gray-700"
        >Filtrer par nom</label
      >
      <input
        [(ngModel)]="filterName"
        (input)="onFiltersChange()"
        type="text"
        placeholder="Rechercher par nom..."
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-white"
      />
    </div>

    <!-- Filter by Forme Juridique -->
    <div class="space-y-2">
      <label class="block text-sm font-medium text-gray-700"
        >Filtrer par forme juridique</label
      >
      <select
        [(ngModel)]="filterForm"
        (change)="onFormChange()"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-white appearance-none bg-[url('data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'none\' viewBox=\'0 0 20 20\'%3e%3cpath stroke=\'%236b7280\' stroke-linecap=\'round\' stroke-linejoin=\'round\' stroke-width=\'1.5\' d=\'m6 8 4 4 4-4\'/%3e%3c/svg%3e')] bg-[position:right_0.5rem_center] bg-no-repeat bg-[size:1.5em_1.5em] pr-10"
      >
        <option value="">Toutes les formes</option>
        <option value="COOPERATIVE">Coopérative</option>
        <option value="ENTREPRISE">Entreprise</option>
        <option value="ASSOCIATION">Association</option>
      </select>
    </div>

    <!-- Filter by ICE -->
    <div class="space-y-2">
      <label class="block text-sm font-medium text-gray-700"
        >Filtrer par ICE</label
      >
      <input
        [(ngModel)]="filterIce"
        (input)="onFiltersChange()"
        type="text"
        placeholder="Rechercher par ICE..."
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 bg-white"
      />
    </div>

    <!-- Filter Results Summary -->
    <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
      <div class="flex items-center gap-2 text-orange-800">
        <svg
          class="w-4 h-4"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
          />
        </svg>
        <span class="font-medium">Résultats du filtre</span>
      </div>
      <p class="text-orange-700 mt-2">
        <span class="font-semibold">{{ filteredMarkersCount }}</span>
        marqueur(s) affiché(s) sur
        <span class="font-semibold">{{ totalMarkers }}</span> au total
      </p>
    </div>

    <!-- Actions -->
    <div class="flex gap-3 pt-4 border-t border-gray-200">
      <button
        (click)="onClearFilters()"
        class="flex-1 bg-gray-100 text-gray-700 py-3 px-6 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200 border border-gray-300 flex items-center justify-center gap-2"
      >
        <svg
          class="w-4 h-4"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
          />
        </svg>
        Réinitialiser
      </button>
      <button
        (click)="onClose()"
        class="flex-1 bg-gradient-to-r from-orange-600 to-red-700 text-white py-3 px-6 rounded-lg font-medium hover:from-orange-700 hover:to-red-800 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 active:translate-y-0 flex items-center justify-center gap-2"
      >
        <svg
          class="w-4 h-4"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5 13l4 4L19 7"
          />
        </svg>
        Fermer
      </button>
    </div>
  </div>
</div>
