
<h1 class="text-3xl font-bold underline">
  TailWind Integration check
</h1>

<div class="map-container">
  <!-- Buttons Top Left -->
  <div class="button-group">
    <button (click)="toggleGestionModal()">Gestion markers</button>
    <button (click)="centerOnUserLocation()">Ma position</button>
    <button (click)="toggleRoutingInputs()">Itinéraire</button>
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="loading">Chargement en cours...</div>

  <!-- Map -->
  <div id="map" class="map"></div>

  <!-- Gestion Modal -->
  <div *ngIf="showGestionModal" class="gestion-modal">
    <h2>Ajouter un marqueur</h2>
    <form (ngSubmit)="addMarker()">
      <div class="modal-sections">
        <!-- Info Générale -->
        <div class="section">
          <h3>Infos</h3>
          <label>Nom :</label>
          <input [(ngModel)]="newMarkerName" name="name">
          <label>Activité :</label>
          <input [(ngModel)]="newActivity" name="activity">
          <label>Forme juridique :</label>
          <select [(ngModel)]="newForm" name="form">
            <option value="">-- Choisir --</option>
            <option value="COOPERATIVE">COOPERATIVE</option>
            <option value="ENTREPRISE">ENTREPRISE</option>
            <option value="ASSOCIATION">ASSOCIATION</option>
          </select>
        </div>

        <!-- Coordonnées -->
        <div class="section">
          <h3>Coordonnées</h3>
          <label>Adresse :</label>
          <input [(ngModel)]="newAddress" name="address">
          <label>Ville :</label>
          <select [(ngModel)]="newCity" name="city">
            <option value="">-- Choisir --</option>
            <option value="Agadir">Agadir</option>
            <option value="Agadir Ida Ou Tanane">Agadir Ida Ou Tanane</option>
            <option value="Al Haouz">Al Haouz</option>
            <option value="Assa-Zag">Assa-Zag</option>
            <option value="Azilal">Azilal</option>
            <option value="Ben Slimane">Ben Slimane</option>
            <option value="Béni Mellal">Béni Mellal</option>
            <option value="Berkane">Berkane</option>
            <option value="Berrechid">Berrechid</option>
            <option value="Boujdour">Boujdour</option>
            <option value="Boulemane">Boulemane</option>
            <option value="Casablanca">Casablanca</option>
            <option value="Chefchaouen">Chefchaouen</option>
            <option value="Chichaoua">Chichaoua</option>
            <option value="Chtouka Ait Baha">Chtouka Ait Baha</option>
            <option value="Driouch">Driouch</option>
            <option value="El Hajeb">El Hajeb</option>
            <option value="El Jadida">El Jadida</option>
            <option value="El Kelaa Sraghna">El Kelaa Sraghna</option>
            <option value="Errachidia">Errachidia</option>
            <option value="Es Semara">Es Semara</option>
            <option value="Essaouira">Essaouira</option>
            <option value="Fahs-Anjra">Fahs-Anjra</option>
            <option value="Fès">Fès</option>
            <option value="Figuig">Figuig</option>
            <option value="Fquih Ben Salah">Fquih Ben Salah</option>
            <option value="Guelmim">Guelmim</option>
            <option value="Guercif">Guercif</option>
            <option value="Ifrane">Ifrane</option>
            <option value="Inezgane Ait Melloul">Inezgane Ait Melloul</option>
            <option value="Jrada">Jrada</option>
            <option value="Kénitra">Kénitra</option>
            <option value="Khemisset">Khemisset</option>
            <option value="Khénifra">Khénifra</option>
            <option value="Khouribga">Khouribga</option>
            <option value="Laâyoune">Laâyoune</option>
            <option value="Larache">Larache</option>
            <option value="M'Diq-Fnideq">M'Diq-Fnideq</option>
            <option value="Mediouna">Mediouna</option>
            <option value="Meknès">Meknès</option>
            <option value="Midelt">Midelt</option>
            <option value="Mohammedia">Mohammedia</option>
            <option value="Moulay Yacoub">Moulay Yacoub</option>
            <option value="Nador">Nador</option>
            <option value="Nouaceur">Nouaceur</option>
            <option value="Oujda">Oujda</option>
            <option value="Oujda Angad">Oujda Angad</option>
            <option value="Ouezzane">Ouezzane</option>
            <option value="Ouarzazate">Ouarzazate</option>
            <option value="Oued Eddahab">Oued Eddahab</option>
            <option value="Rabat">Rabat</option>
            <option value="Rehamna">Rehamna</option>
            <option value="Safi">Safi</option>
            <option value="Salé">Salé</option>
            <option value="Settat">Settat</option>
            <option value="Sefrou">Sefrou</option>
            <option value="Sidi Bennour">Sidi Bennour</option>
            <option value="Sidi Ifni">Sidi Ifni</option>
            <option value="Sidi Kacem">Sidi Kacem</option>
            <option value="Sidi Slimane">Sidi Slimane</option>
            <option value="Skhirate-Temara">Skhirate-Temara</option>
            <option value="Tan-Tan">Tan-Tan</option>
            <option value="Taounate">Taounate</option>
            <option value="Taourirt">Taourirt</option>
            <option value="Tarfaya">Tarfaya</option>
            <option value="Taroudant">Taroudant</option>
            <option value="Tata">Tata</option>
            <option value="Taza">Taza</option>
            <option value="Tétouan">Tétouan</option>
            <option value="Tinghir">Tinghir</option>
            <option value="Tiznit">Tiznit</option>
            <option value="Tanger">Tanger</option>
            <option value="Tanger-Asilah">Tanger-Asilah</option>
            <option value="Youssoufia">Youssoufia</option>
            <option value="Zagora">Zagora</option>
          </select>
          <label>Code Postal :</label>
          <input [(ngModel)]="newPostcode" name="postcode">
          <label>Province :</label>
          <select [(ngModel)]="newProvince" name="province">
            <option value="">-- Choisir --</option>
            <option value="Béni Mellal-Khénifra">Béni Mellal-Khénifra</option>
            <option value="Casablanca-Settat">Casablanca-Settat</option>
            <option value="Dakhla-Oued Ed-Dahab">Dakhla-Oued Ed-Dahab</option>
            <option value="Drâa-Tafilalet">Drâa-Tafilalet</option>
            <option value="Fès-Meknès">Fès-Meknès</option>
            <option value="Guelmim-Oued Noun">Guelmim-Oued Noun</option>
            <option value="Laâyoune-Sakia El Hamra">Laâyoune-Sakia El Hamra</option>
            <option value="Marrakech-Safi">Marrakech-Safi</option>
            <option value="Oriental">Oriental</option>
            <option value="Rabat-Salé-Kénitra">Rabat-Salé-Kénitra</option>
            <option value="Souss Massa">Souss Massa</option>
            <option value="Tanger-Tétouan-Al Hoceima">Tanger-Tétouan-Al Hoceima</option>
          </select>
          <label>Lieu-dit :</label>
          <input [(ngModel)]="newPlace" name="place">
          <label>Latitude :</label>
          <input type="number" [(ngModel)]="newLatitude" name="lat">
          <label>Longitude :</label>
          <input type="number" [(ngModel)]="newLongitude" name="lng">
        </div>

        <!-- Contacts -->
        <div class="section">
          <h3>Contact</h3>
          <label>Téléphone :</label>
          <input [(ngModel)]="newPhone" name="phone">
          <label>Fax :</label>
          <input [(ngModel)]="newFax" name="fax">
          <label>Email :</label>
          <input [(ngModel)]="newEmail" name="email">
          <label>RC :</label>
          <input [(ngModel)]="newRc" name="rc">
          <label>ICE :</label>
          <input [(ngModel)]="newIce" name="ice">
        </div>
      </div>

      <div class="form-buttons">
        <button type="submit">Ajouter</button>
        <button type="button" (click)="toggleGestionModal()">Fermer</button>
      </div>
    </form>

    <h3>Liste des marqueurs</h3>
    <ul>
      <li *ngFor="let marker of markers; trackBy: trackById">
        {{ marker.name }}
        <button (click)="centerMapOnMarker(marker)">Centrer</button>
        <button (click)="removeMarker(markers.indexOf(marker))">Supprimer</button>
      </li>
    </ul>
  </div>

  <!-- Routing Form -->
  <div *ngIf="showRoutingInputs" class="itineraire-form">
    <h3>Tracer un itinéraire</h3>
    <label>Point A :</label>
    <select [(ngModel)]="selectedA" name="a">
      <option value="user">Ma position</option>
      <option *ngFor="let m of markers" [value]="m.id">{{ m.name }}</option>
    </select>

    <label>Point B :</label>
    <select [(ngModel)]="selectedB" name="b">
      <option value="user">Ma position</option>
      <option *ngFor="let m of markers" [value]="m.id">{{ m.name }}</option>
    </select>

    <div *ngIf="currentRouteInfo" class="route-summary">
      <p><strong>Distance :</strong> {{ currentRouteInfo.distanceKm }} km</p>
      <p><strong>Durée estimée :</strong> {{ currentRouteInfo.timeMin }} minutes</p>
    </div>

    <div class="form-buttons">
      <button (click)="drawRoute()">Tracer</button>
      <button (click)="toggleRoutingInputs()">Fermer</button>
    </div>
  </div>
</div>
